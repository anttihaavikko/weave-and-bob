[gd_scene load_steps=24 format=3 uid="uid://il0jdy8qi06w"]

[ext_resource type="Script" uid="uid://c7fckvtsco120" path="res://Scripts/blob.gd" id="1_gy3pb"]
[ext_resource type="Texture2D" uid="uid://7etpco8nk31f" path="res://icon.svg" id="1_tqd60"]
[ext_resource type="Script" uid="uid://cwvl2v76rnhn4" path="res://Scripts/gun.gd" id="2_jc5ra"]
[ext_resource type="Texture2D" uid="uid://c4624ijigoeqo" path="res://Sprites/ak47.png" id="3_gxvcn"]
[ext_resource type="Script" uid="uid://bwknch2pvkg4u" path="res://Scripts/line.gd" id="4_jc5ra"]
[ext_resource type="Script" uid="uid://b3lmgbo0i5l43" path="res://Scripts/poly_from_line.gd" id="5_gxvcn"]
[ext_resource type="Script" uid="uid://dhbqmxfktr4re" path="res://Scripts/glob_legs.gd" id="6_qc6ha"]
[ext_resource type="Texture2D" uid="uid://c5v2fgqgkwr2w" path="res://Sprites/reticule.png" id="6_thj1j"]
[ext_resource type="Script" uid="uid://bo6cnh3l6qsfo" path="res://Scripts/face_rotater.gd" id="7_a8vtn"]
[ext_resource type="Texture2D" uid="uid://go0giiad03jq" path="res://Sprites/circle.png" id="7_qc6ha"]
[ext_resource type="Script" uid="uid://kurmc8gi31mu" path="res://Scripts/limb.gd" id="8_5fh0x"]
[ext_resource type="Script" uid="uid://1dan3ej2pqjl" path="res://Scripts/casing_ejector.gd" id="8_301kd"]
[ext_resource type="AudioStream" uid="uid://du4gppilni6bp" path="res://Sounds/rifle.wav" id="9_301kd"]
[ext_resource type="PackedScene" uid="uid://bcw3fv3n1jhbq" path="res://Scenes/casing.tscn" id="9_8816d"]
[ext_resource type="Texture2D" uid="uid://w5ubxh2dsi74" path="res://Sprites/mouth.png" id="9_gl400"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_8gbba"]
radius = 4.7334595
height = 36.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_jjgbg"]
radius = 8.0
height = 72.0

[sub_resource type="CircleShape2D" id="CircleShape2D_jc5ra"]

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_spthc"]
particle_flag_disable_z = true
angle_min = 1.0728835e-05
angle_max = 1.0728835e-05
direction = Vector3(0, 0, 0)
spread = 20.0
initial_velocity_min = 500.0
initial_velocity_max = 1000.0
gravity = Vector3(0, 0, 0)
scale_min = 0.01
scale_max = 0.01

[sub_resource type="Curve" id="Curve_spthc"]
_data = [Vector2(0, 0.10721612), 0.0, 2.0742433, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_8b88t"]
curve = SubResource("Curve_spthc")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_8b88t"]
particle_flag_disable_z = true
angle_min = 1.0728835e-05
angle_max = 1.0728835e-05
direction = Vector3(0, 0, 0)
spread = 0.0
gravity = Vector3(0, 0, 0)
scale_min = 0.099999994
scale_max = 0.29999998
scale_curve = SubResource("CurveTexture_8b88t")

[sub_resource type="CircleShape2D" id="CircleShape2D_ctfmv"]
radius = 25.179358

[node name="Blob" type="Node2D"]
script = ExtResource("1_gy3pb")

[node name="Link N" type="RigidBody2D" parent="."]
position = Vector2(-0.11584473, -50)
rotation = -1.5707964
mass = 0.1

[node name="CollisionShape2D" type="CollisionShape2D" parent="Link N"]
position = Vector2(0, -1)
shape = SubResource("CapsuleShape2D_8gbba")

[node name="Sprite2D" type="Sprite2D" parent="Link N"]
visible = false
scale = Vector2(0.109730035, 0.109730035)
texture = ExtResource("1_tqd60")

[node name="DampedSpringJoint2D" type="DampedSpringJoint2D" parent="Link N"]
rotation = 1.5707964
node_a = NodePath("..")
node_b = NodePath("../../Gun")
disable_collision = false
stiffness = 64.0

[node name="PinJoint2D" type="PinJoint2D" parent="Link N"]
position = Vector2(-2.000001, 18.953592)
node_a = NodePath("..")
node_b = NodePath("../../Link NE")
disable_collision = false

[node name="Link NE" type="RigidBody2D" parent="."]
position = Vector2(33.80316, -33.99997)
rotation = -0.7853982
scale = Vector2(0.99999994, 0.99999994)
mass = 0.1

[node name="CollisionShape2D" type="CollisionShape2D" parent="Link NE"]
position = Vector2(0, -1)
shape = SubResource("CapsuleShape2D_8gbba")

[node name="Sprite2D" type="Sprite2D" parent="Link NE"]
visible = false
scale = Vector2(0.109730035, 0.109730035)
texture = ExtResource("1_tqd60")

[node name="DampedSpringJoint2D" type="DampedSpringJoint2D" parent="Link NE"]
rotation = 1.5707964
node_a = NodePath("..")
node_b = NodePath("../../Gun")
disable_collision = false
stiffness = 64.0

[node name="PinJoint2D" type="PinJoint2D" parent="Link NE"]
position = Vector2(-1.4339857, 18.364964)
node_a = NodePath("..")
node_b = NodePath("../../Link E")
disable_collision = false

[node name="Link E" type="RigidBody2D" parent="."]
position = Vector2(48.76825, -1)
mass = 0.1

[node name="CollisionShape2D" type="CollisionShape2D" parent="Link E"]
position = Vector2(0, -1)
shape = SubResource("CapsuleShape2D_8gbba")

[node name="Sprite2D" type="Sprite2D" parent="Link E"]
visible = false
scale = Vector2(0.109730035, 0.109730035)
texture = ExtResource("1_tqd60")

[node name="DampedSpringJoint2D" type="DampedSpringJoint2D" parent="Link E"]
rotation = 1.5707964
node_a = NodePath("..")
node_b = NodePath("../../Gun")
disable_collision = false
stiffness = 64.0

[node name="PinJoint2D" type="PinJoint2D" parent="Link E"]
position = Vector2(-1.9953684, 20)
node_a = NodePath("..")
node_b = NodePath("../../Link SE")
disable_collision = false

[node name="Link SE" type="RigidBody2D" parent="."]
position = Vector2(32.80542, 36)
rotation = 0.78539795
scale = Vector2(0.9999998, 0.9999999)
mass = 0.1

[node name="CollisionShape2D" type="CollisionShape2D" parent="Link SE"]
position = Vector2(0, -1)
shape = SubResource("CapsuleShape2D_8gbba")

[node name="Sprite2D" type="Sprite2D" parent="Link SE"]
visible = false
scale = Vector2(0.109730035, 0.109730035)
texture = ExtResource("1_tqd60")

[node name="DampedSpringJoint2D" type="DampedSpringJoint2D" parent="Link SE"]
rotation = 1.5707964
node_a = NodePath("..")
node_b = NodePath("../../Gun")
disable_collision = false
stiffness = 64.0

[node name="PinJoint2D" type="PinJoint2D" parent="Link SE"]
position = Vector2(-1.391365, 18.361921)
node_a = NodePath("..")
node_b = NodePath("../../Link S")
disable_collision = false

[node name="Link S" type="RigidBody2D" parent="."]
position = Vector2(-1.1159058, 49)
rotation = 1.5707964
mass = 0.1

[node name="CollisionShape2D" type="CollisionShape2D" parent="Link S"]
position = Vector2(0, -1)
shape = SubResource("CapsuleShape2D_8gbba")

[node name="Sprite2D" type="Sprite2D" parent="Link S"]
visible = false
scale = Vector2(0.109730035, 0.109730035)
texture = ExtResource("1_tqd60")

[node name="DampedSpringJoint2D" type="DampedSpringJoint2D" parent="Link S"]
rotation = 1.5707964
node_a = NodePath("..")
node_b = NodePath("../../Gun")
disable_collision = false
stiffness = 64.0

[node name="PinJoint2D" type="PinJoint2D" parent="Link S"]
position = Vector2(-1.0000002, 19.95365)
node_a = NodePath("..")
node_b = NodePath("../../Link SW")
disable_collision = false

[node name="Link SW" type="RigidBody2D" parent="."]
position = Vector2(-38.030212, 34.99997)
rotation = 2.3561943
scale = Vector2(0.9999999, 0.9999999)
mass = 0.1

[node name="CollisionShape2D" type="CollisionShape2D" parent="Link SW"]
position = Vector2(0, -1)
shape = SubResource("CapsuleShape2D_8gbba")

[node name="Sprite2D" type="Sprite2D" parent="Link SW"]
visible = false
scale = Vector2(0.109730035, 0.109730035)
texture = ExtResource("1_tqd60")

[node name="DampedSpringJoint2D" type="DampedSpringJoint2D" parent="Link SW"]
rotation = 1.5707964
node_a = NodePath("..")
node_b = NodePath("../../Gun")
disable_collision = false
stiffness = 64.0

[node name="PinJoint2D" type="PinJoint2D" parent="Link SW"]
position = Vector2(-1.4339018, 18.365047)
node_a = NodePath("..")
node_b = NodePath("../../Link W")
disable_collision = false

[node name="Link W" type="RigidBody2D" parent="."]
position = Vector2(-51, 0)
rotation = 3.1415925
mass = 0.1

[node name="CollisionShape2D" type="CollisionShape2D" parent="Link W"]
position = Vector2(0, -1)
shape = SubResource("CapsuleShape2D_8gbba")

[node name="Sprite2D" type="Sprite2D" parent="Link W"]
visible = false
scale = Vector2(0.109730035, 0.109730035)
texture = ExtResource("1_tqd60")

[node name="DampedSpringJoint2D" type="DampedSpringJoint2D" parent="Link W"]
rotation = 1.5707964
node_a = NodePath("..")
node_b = NodePath("../../Gun")
disable_collision = false
stiffness = 64.0

[node name="PinJoint2D" type="PinJoint2D" parent="Link W"]
position = Vector2(-0.997684, 18)
node_a = NodePath("..")
node_b = NodePath("../../Link NW")
disable_collision = false

[node name="Left Hand Start" type="Node2D" parent="Link W"]

[node name="Link NW" type="RigidBody2D" parent="."]
position = Vector2(-36.03473, -33.99997)
rotation = -2.3561945
scale = Vector2(0.99999994, 0.99999994)
mass = 0.1

[node name="CollisionShape2D" type="CollisionShape2D" parent="Link NW"]
position = Vector2(0, -1)
shape = SubResource("CapsuleShape2D_8gbba")

[node name="Sprite2D" type="Sprite2D" parent="Link NW"]
visible = false
scale = Vector2(0.109730035, 0.109730035)
texture = ExtResource("1_tqd60")

[node name="DampedSpringJoint2D" type="DampedSpringJoint2D" parent="Link NW"]
rotation = 1.5707964
node_a = NodePath("..")
node_b = NodePath("../../Gun")
disable_collision = false
stiffness = 64.0

[node name="PinJoint2D" type="PinJoint2D" parent="Link NW"]
position = Vector2(-1.3895683, 19.77439)
node_a = NodePath("..")
node_b = NodePath("../../Link N")
disable_collision = false

[node name="Gun" type="RigidBody2D" parent="." node_paths=PackedStringArray("aim_target", "shot_lines", "barrel", "camera", "reticule", "muzzle", "flash", "ejector", "shot_sound")]
z_index = 100
position = Vector2(0, 19)
script = ExtResource("2_jc5ra")
aim_target = NodePath("Aim Target")
shot_lines = [null]
wall_mask = 2
barrel = NodePath("Barrel")
camera = NodePath("Camera2D")
reticule = NodePath("Camera2D/Reticule")
muzzle = NodePath("White Bits")
flash = NodePath("Muzzle")
ejector = NodePath("Ejector")
shot_sound = NodePath("Shot Sound")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Gun"]
position = Vector2(3, -2)
rotation = -1.5707964
shape = SubResource("CapsuleShape2D_jjgbg")

[node name="Ak47" type="Sprite2D" parent="Gun"]
position = Vector2(8, 11)
scale = Vector2(0.3414634, 0.3414634)
texture = ExtResource("3_gxvcn")

[node name="Aim Target" type="CharacterBody2D" parent="Gun"]
position = Vector2(95, 0)
collision_layer = 0
collision_mask = 0

[node name="CollisionShape2D" type="CollisionShape2D" parent="Gun/Aim Target"]
shape = SubResource("CircleShape2D_jc5ra")

[node name="Aim Spring" type="DampedSpringJoint2D" parent="Gun/Aim Target"]
rotation = 1.5707964
node_a = NodePath("..")
node_b = NodePath("../..")
length = 20.0
stiffness = 64.0
damping = 0.5

[node name="Sprite2D" type="Sprite2D" parent="Gun/Aim Target"]
visible = false
scale = Vector2(0.21272318, 0.21272318)
texture = ExtResource("1_tqd60")

[node name="Handle Pos" type="Node2D" parent="Gun"]
position = Vector2(-22, 15)

[node name="Rest Pos" type="Node2D" parent="Gun"]
position = Vector2(33, 4)

[node name="Circle" type="Sprite2D" parent="Gun/Rest Pos"]
modulate = Color(0, 0, 0, 1)
position = Vector2(1.66893e-06, -4.7683716e-07)
scale = Vector2(0.028000016, 0.018199947)
texture = ExtResource("7_qc6ha")

[node name="Barrel" type="Node2D" parent="Gun"]
position = Vector2(79, -1)

[node name="Camera2D" type="Camera2D" parent="Gun"]
position = Vector2(0, -19)
process_callback = 0
position_smoothing_enabled = true
rotation_smoothing_enabled = true
drag_horizontal_enabled = true
drag_vertical_enabled = true
drag_top_margin = 0.1
drag_bottom_margin = 0.1

[node name="Reticule" type="Sprite2D" parent="Gun/Camera2D"]
z_index = 999
position = Vector2(139, -64)
scale = Vector2(0.851, 0.851)
texture = ExtResource("6_thj1j")

[node name="White Bits" type="GPUParticles2D" parent="Gun"]
position = Vector2(78, -1)
emitting = false
amount = 6
texture = ExtResource("7_qc6ha")
lifetime = 0.2
explosiveness = 0.46
randomness = 0.18
collision_base_size = 0.01
visibility_rect = Rect2(-1000, -1000, 2000, 2000)
local_coords = true
trail_enabled = true
trail_lifetime = 0.1
process_material = SubResource("ParticleProcessMaterial_spthc")

[node name="Muzzle" type="GPUParticles2D" parent="Gun"]
modulate = Color(1, 1, 1, 0.5019608)
position = Vector2(123, 0)
emitting = false
amount = 2
texture = ExtResource("7_qc6ha")
lifetime = 0.08
explosiveness = 1.0
randomness = 0.18
collision_base_size = 0.01
visibility_rect = Rect2(-1000, -1000, 2000, 2000)
local_coords = true
trail_lifetime = 0.1
process_material = SubResource("ParticleProcessMaterial_8b88t")

[node name="Ejector" type="Node2D" parent="Gun"]
position = Vector2(-8, -4)
scale = Vector2(0.9912767, 1)
script = ExtResource("8_301kd")
casing = ExtResource("9_8816d")

[node name="Shot Sound" type="AudioStreamPlayer2D" parent="Gun"]
position = Vector2(80, -1)
stream = ExtResource("9_301kd")

[node name="Line2D" type="Line2D" parent="." node_paths=PackedStringArray("targets")]
points = PackedVector2Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
closed = true
default_color = Color(0, 0, 0, 1)
script = ExtResource("4_jc5ra")
targets = [NodePath("../Link N/PinJoint2D"), NodePath("../Link NE/PinJoint2D"), NodePath("../Link E/PinJoint2D"), NodePath("../Link SE/PinJoint2D"), NodePath("../Link S/PinJoint2D"), NodePath("../Link SW/PinJoint2D"), NodePath("../Link W/PinJoint2D"), NodePath("../Link NW/PinJoint2D")]

[node name="Polygon2D" type="Polygon2D" parent="." node_paths=PackedStringArray("line")]
z_index = 10
position = Vector2(0, 1)
color = Color(0, 0.47843137, 0.2627451, 1)
polygon = PackedVector2Array(-10, -10, 10, -10, 10, 10, -10, 10)
script = ExtResource("5_gxvcn")
line = NodePath("../Line2D")

[node name="Control Node" type="RigidBody2D" parent="." node_paths=PackedStringArray("gun")]
mass = 0.5
linear_damp = 1.0
script = ExtResource("6_qc6ha")
gun = NodePath("../Gun")
jump_force = 0.5

[node name="CollisionShape2D" type="CollisionShape2D" parent="Control Node"]
shape = SubResource("CircleShape2D_ctfmv")

[node name="Sprite2D" type="Sprite2D" parent="Control Node"]
visible = false
scale = Vector2(0.39999926, 0.39999926)
texture = ExtResource("1_tqd60")

[node name="Face" type="Node2D" parent="Control Node"]
script = ExtResource("7_a8vtn")

[node name="Face" type="Node2D" parent="Control Node/Face"]
z_index = 20

[node name="Left Arm" type="Node2D" parent="Control Node/Face/Face"]
position = Vector2(-35, 6)

[node name="Left Arm" type="Line2D" parent="Control Node/Face/Face/Left Arm" node_paths=PackedStringArray("target")]
z_index = 150
z_as_relative = false
points = PackedVector2Array(0, 0, 0, 0, 0, 0)
default_color = Color(0, 0, 0, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
script = ExtResource("8_5fh0x")
target = NodePath("../../../../../Gun/Handle Pos")
length = 25.0

[node name="Right Arm" type="Node2D" parent="Control Node/Face/Face"]
position = Vector2(33, 4)

[node name="Right Arm Line" type="Line2D" parent="Control Node/Face/Face/Right Arm" node_paths=PackedStringArray("target")]
z_index = 10
points = PackedVector2Array(0, 0, 0, 0, 0, 0)
width = 8.0
default_color = Color(0, 0, 0, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
script = ExtResource("8_5fh0x")
target = NodePath("../../../../../Gun/Rest Pos")
length = 25.0
flip = true

[node name="Eye Left" type="Sprite2D" parent="Control Node/Face/Face"]
position = Vector2(-9, 0)
rotation = 3.1415925
scale = Vector2(0.014, 0.014)
texture = ExtResource("7_qc6ha")

[node name="Eye Right" type="Sprite2D" parent="Control Node/Face/Face"]
position = Vector2(9, 0)
rotation = 3.1415925
scale = Vector2(0.014, 0.014)
texture = ExtResource("7_qc6ha")

[node name="Blush Left" type="Sprite2D" parent="Control Node/Face/Face"]
modulate = Color(0.91764706, 0.3372549, 0.09411765, 1)
position = Vector2(-15.749341, 5.1347084)
rotation = 3.1415925
scale = Vector2(0.019020557, 0.012130703)
texture = ExtResource("7_qc6ha")

[node name="Blush Right" type="Sprite2D" parent="Control Node/Face/Face"]
modulate = Color(0.91764706, 0.3372549, 0.09411765, 1)
position = Vector2(15.891183, 4.945591)
rotation = 3.1415925
scale = Vector2(0.019587915, 0.011374233)
texture = ExtResource("7_qc6ha")

[node name="Mouth" type="Sprite2D" parent="Control Node/Face/Face"]
position = Vector2(0, 3)
scale = Vector2(0.07446808, 0.07446809)
texture = ExtResource("9_gl400")

[connection signal="shot" from="Gun" to="." method="_on_gun_shot"]
